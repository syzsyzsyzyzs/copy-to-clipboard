<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Copy to Clipboard</title>
</head>
<body>
    <script>
        // 从 URL 参数中获取字段值和目标 URL
        const urlParams = new URLSearchParams(window.location.search);
        const fieldValue = urlParams.get('field');
        const targetUrl = urlParams.get('url');

        console.log('Field value:', fieldValue);
        console.log('Target URL:', targetUrl);

        if (fieldValue && targetUrl) {
            // 创建一个临时的 textarea 元素
            const textarea = document.createElement('textarea');
            textarea.value = fieldValue;
            textarea.setAttribute('readonly', '');
            textarea.style.position = 'absolute';
            textarea.style.left = '-9999px';
            document.body.appendChild(textarea);

            // 选择并复制内容
            textarea.select();
            textarea.setSelectionRange(0, fieldValue.length); // 适配部分 iOS 设备
            let successful = document.execCommand('copy');

            if (successful) {
                console.log('Text copied successfully');
            } else {
                console.error('Unable to copy text');
            }

            // 删除临时的 textarea 元素
            document.body.removeChild(textarea);

            // 使用 window.location.replace 进行跳转
            window.location.replace(targetUrl);
        } else {
            alert('Field value or target URL not provided.');
        }
    </script>
</body>
</html>
